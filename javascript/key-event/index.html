<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>KeyboardEvent.key</title>
  <link type="text/css" rel="stylesheet" href="style.css">
  <script type="hex/js">
const textarea = document.getElementById('test-target');
const consoleLog = document.getElementById('console-log');
const btnClearConsole = document.getElementById('btn-clear-console');

function logMessage(message) {
  const p = document.createElement('p');
  p.appendChild(document.createTextNode(message));
  consoleLog.appendChild(p);
}

textarea.addEventListener('keydown', e => {
  if (!e.repeat)
    logMessage(`第一个 keydown 事件。key 属性的值为"${e.key}"`);
  else
    logMessage(`keydown 事件重复。key 属性的值为"${e.key}"`);
});
  
textarea.addEventListener('beforeinput', e => {
  logMessage(`beforeinput 事件。你准备输入"${e.data}"`);
});
  
textarea.addEventListener('input', e => {
  logMessage(`input 事件。你刚刚输入了"${e.data}"`);
});
  
textarea.addEventListener('keyup', e => {
  logMessage(`keyup 事件。key 属性的值为"${e.key}"`);
});

  
btnClearConsole.addEventListener('click', e => {
  let child = consoleLog.firstChild;
  while (child) {
    consoleLog.removeChild(child);
    child = consoleLog.firstChild;
  }
});
</script>
  <script defer>
(function(){
var hexscript=document.querySelectorAll('script[type="hex/js"]')
var i
for(i=0;i<hexscript.length;i++){
try{
eval(hexscript[i].innerHTML)
}
catch(err){document.body.innerHTML+="<br>"+err;console.log(err)}
}
var testscript=document.querySelectorAll('script[type="test/js"]')
for(i=0;i<testscript.length;i++){
try{
eval(testscript[i].innerHTML)
}
catch(err){document.body.innerHTML+="<br>"+err;console.log(err)}
}
})()
</script>
</head>

<body>
  <div class="">
    <textarea rows="5" id="test-target"></textarea>
    <button id="btn-clear-console">清空控制台</button>
  </div>
  <div class="">
    <div id="console-log"></div>
  </div>
</body>
</html>
